<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Nusaiba ❤️</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #5eead4; /* Mint Teal */
            --secondary: #94a3b8; /* Slate Blue */
            --terminal-bg: #030712; /* Deepest Navy */
        }

        body {
            background: radial-gradient(circle at center, #111827 0%, #030712 100%);
            color: #f8fafc;
            font-family: 'VT323', monospace;
            overflow: hidden;
            margin: 0;
            height: 100vh;
        }

        /* Subtle CRT Scanlines */
        .crt-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                rgba(18, 16, 16, 0) 50%,
                rgba(0, 0, 0, 0.04) 50%
            );
            background-size: 100% 3px;
            z-index: 100;
            pointer-events: none;
        }

        /* Background Canvases */
        #stars-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -5;
        }

        #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20;
            pointer-events: none;
        }

        /* Intro Screen - Centered Overlay */
        #intro-ui {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 50;
            transition: opacity 0.8s ease;
            padding: 20px;
        }

        /* Transmission Animation */
        .transmission-text {
            animation: text-flicker 3s linear infinite;
        }

        @keyframes text-flicker {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
            70% { opacity: 0.9; }
            80% { opacity: 1; }
        }

        .dots::after {
            content: '';
            animation: ellipsis 1.5s steps(4, end) infinite;
        }

        @keyframes ellipsis {
            0% { content: ''; }
            25% { content: '.'; }
            50% { content: '..'; }
            75% { content: '...'; }
        }

        /* Main UI Container */
        #main-ui {
            position: relative;
            z-index: 10;
            height: 100vh;
            overflow-y: auto;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            scroll-behavior: smooth;
            -ms-overflow-style: none;
            scrollbar-width: none;
            opacity: 0;
            visibility: hidden;
            transform-origin: center;
            will-change: transform, opacity, filter;
        }

        #main-ui::-webkit-scrollbar { display: none; }

        /* CRT Screen-On Animation (Intro) */
        .ui-appear {
            opacity: 1 !important;
            visibility: visible !important;
            animation: screen-on 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }

        @keyframes screen-on {
            0% { transform: scaleY(0.005) scaleX(0); filter: brightness(5); }
            50% { transform: scaleY(0.005) scaleX(1); filter: brightness(3); }
            100% { transform: scaleY(1) scaleX(1); filter: brightness(1); }
        }

        /* Optimized CRT Screen-Off Animation (Outro) */
        .ui-fade-out {
            pointer-events: none !important;
            animation: screen-off 0.7s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes screen-off {
            0% { transform: scaleY(1) scaleX(1); filter: brightness(1); opacity: 1; }
            30% { transform: scaleY(0.005) scaleX(1.02); filter: brightness(2); opacity: 1; }
            60% { transform: scaleY(0.005) scaleX(0.2); filter: brightness(4); opacity: 1; }
            100% { transform: scaleY(0) scaleX(0); filter: brightness(5); opacity: 0; }
        }

        /* Clean Glass Letter Card */
        .letter-card {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.5),
                inset 0 1px 1px rgba(255, 255, 255, 0.05);
            position: relative;
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 4px;
        }

        .letter-card::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; width: 10px; height: 10px;
            border-top: 2px solid var(--primary);
            border-left: 2px solid var(--primary);
        }

        .letter-card::after {
            content: '';
            position: absolute;
            bottom: -2px; right: -2px; width: 10px; height: 10px;
            border-bottom: 2px solid var(--primary);
            border-right: 2px solid var(--primary);
        }

        /* Lively Text Animations */
        .lively-text {
            animation: terminal-jitter 8s infinite;
        }

        @keyframes terminal-jitter {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(0.5px); }
            20% { transform: translateX(-0.5px); }
            30% { transform: translateX(0); }
        }

        .float-text {
            display: inline-block;
            animation: float-y 4s ease-in-out infinite;
        }

        @keyframes float-y {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }

        .heart {
            color: var(--primary);
            animation: beat 1s infinite steps(2);
            display: inline-block;
        }

        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .pixel-button {
            background: rgba(15, 23, 42, 0.6);
            color: var(--primary);
            padding: 12px 28px;
            border: 1px solid var(--primary);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            pointer-events: auto;
        }

        .pixel-button:hover {
            background: rgba(94, 234, 212, 0.15);
            box-shadow: 0 0 20px rgba(94, 234, 212, 0.2);
            transform: translateY(-2px);
        }

        .pixel-text {
            line-height: 1.5;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .accent-text {
            color: var(--primary);
            opacity: 0.95;
            text-shadow: 0 0 10px rgba(94, 234, 212, 0.4);
            animation: text-pulse 2s infinite ease-in-out;
        }

        @keyframes text-pulse {
            0%, 100% { text-shadow: 0 0 5px rgba(94, 234, 212, 0.2); }
            50% { text-shadow: 0 0 15px rgba(94, 234, 212, 0.6); }
        }

        @media (max-width: 640px) {
            .pixel-text {
                line-height: 1.4;
            }
        }
    </style>
</head>
<body>

    <div class="crt-overlay"></div>
    <canvas id="stars-canvas"></canvas>
    <canvas id="fireworks-canvas"></canvas>

    <!-- Intro Screen -->
    <div id="intro-ui">
        <div class="mb-10 text-center px-4 w-full">
            <p class="text-slate-400 text-xs sm:text-base md:text-xl tracking-[0.15em] sm:tracking-[0.25em] md:tracking-[0.45em] mb-3 uppercase transmission-text whitespace-nowrap overflow-hidden text-ellipsis">Incoming transmission<span class="dots"></span></p>
            <h2 class="text-3xl md:text-6xl text-white font-bold tracking-tight uppercase">A message for Nusaiba</h2>
        </div>
        <button onclick="openLetter()" class="pixel-button open-btn">
            OPEN LETTER
        </button>
    </div>

    <!-- Letter UI Content -->
    <div id="main-ui">
        <div class="relative w-full max-w-2xl px-4 md:px-6 py-8 lively-text">
            
            <div class="text-center mb-8 md:mb-10">
                <h1 class="text-3xl sm:text-5xl md:text-7xl font-bold tracking-[0.1em] md:tracking-[0.15em] mr-[-0.1em] md:mr-[-0.15em] text-white pixel-text uppercase float-text">
                    HAPPY <span class="accent-text">NEW YEAR</span>
                </h1>
                <p id="roman-year" class="text-base md:text-xl text-slate-400 mt-2 tracking-[0.2em] md:tracking-[0.4em] mr-[-0.2em] md:mr-[-0.4em] opacity-60 uppercase">-- MMXXVI --</p>
            </div>

            <div class="letter-card p-6 sm:p-8 md:p-10 text-xl sm:text-2xl md:text-3xl">
                <p class="accent-text mb-4 md:mb-6 border-b border-teal-900/50 pb-1 inline-block">Dear Nusaiba,</p>
                
                <div id="letter-content" class="space-y-4 text-slate-200 pixel-text text-justify">
                    <!-- Dynamic content rendered immediately -->
                </div>

                <div id="signature-block" class="mt-8 md:mt-10 pt-6 border-t border-white/5 text-right">
                    <p class="text-xs md:text-sm uppercase tracking-widest text-slate-500 mb-1">Yours.Ever</p>
                    <p class="text-4xl md:text-5xl accent-text">Nee</p>
                </div>
            </div>
        </div>

        <button id="init-btn" onclick="startTheShow()" class="pixel-button mt-4 mb-20 text-lg md:text-xl px-6 md:px-8">
            CLICK HERE
        </button>
    </div>

    <script>
        // --- DATA & CONFIG ---
        const currentYear = new Date().getFullYear();
        const nextYear = currentYear + 1;
        
        function toRoman(year) {
            const romans = { 2025: "MMXXV", 2026: "MMXXVI", 2027: "MMXXVII" };
            return romans[year] || "MMXX" + (year - 2020); 
        }

        document.getElementById('roman-year').innerText = `-- ${toRoman(nextYear)} --`;

        const letterData = [
            { text: "Kemon acho amar pretty little beibii? Ki kolooo? Ami bhalooo achiii. Tomay chiti likhiii :3", color: "text-slate-300" },
            { text: `Janoo love, New Year’s never meant much to me, kokhonoii na. My life was sooooo boring. Amar kache each and every day same chilo, ajibon dhorei. Plain, empty, boringg. Din niyei care kortam na, ar bochor niye to aro na. ${currentYear-5} ki ar ${currentYear-4} ki, shob e to samee chilo.`, color: "text-slate-300" },
            { text: "This all changed when I met you. My life is not boring anymoree. I don’t feel empty anymoree. My life is not plain white anymoree. ", color: "text-white" },
            { text: "The canvas of my life has been colored with the prettiest color called “Nusaiba”", color: "accent-text font-bold" },
            { text: "Now each day is special to me, because I have you. And each passing year is like a countdown to me. A countdown to the day I marry you.", color: "text-slate-300" },
            { text: `I love you babuuu, I love you soooo much. Thank you for making my life sooo beautiful. I feel sooo blessed when I think about you. I know ${currentYear} hasn’t been the kindest to us. There was soo much pressure, soo many sorrows, soo many ups and downs. Yet, this is going to be a year that I’ll remember for the rest of my life. Because I found you this year—the best gift I could receive ❤`, color: "text-slate-300" },
            { text: `I love you jaan. Best wishes. May ${nextYear} bring nothing but happiness in our lives. May God give you the strength to keep pushing forward. Have faith in yourself babuu, you can do it. Everything will be okay, don’t worry. Let’s make soo many good memories this year. To this year and millennia more.`, color: "text-slate-300" },
            { text: `HAPPY NEW YEAR NUSHAA.`, color: "accent-text text-2xl sm:text-3xl md:text-4xl mt-10 text-center font-bold" }
        ];

        function renderLetter() {
            const container = document.getElementById('letter-content');
            container.innerHTML = ""; 
            letterData.forEach(item => {
                const p = document.createElement('p');
                p.className = `${item.color}`;
                let content = item.text.replace(/❤/g, '<span class="heart">❤</span>');
                p.innerHTML = content;
                container.appendChild(p);
            });
        }

        // --- UI LOGIC ---
        function openLetter() {
            const intro = document.getElementById('intro-ui');
            const main = document.getElementById('main-ui');
            
            intro.style.opacity = '0';
            intro.style.pointerEvents = 'none';
            
            setTimeout(() => {
                intro.style.display = 'none';
                main.classList.add('ui-appear');
            }, 600);
        }

        // --- STARRY NIGHT CANVAS ---
        const starsCanvas = document.getElementById('stars-canvas');
        const sCtx = starsCanvas.getContext('2d');
        let starList = [];
        let shootingStars = [];

        function initStars() {
            const dpr = window.devicePixelRatio || 1;
            starsCanvas.width = window.innerWidth * dpr;
            starsCanvas.height = window.innerHeight * dpr;
            sCtx.scale(dpr, dpr);
            starList = [];
            for (let i = 0; i < (window.innerWidth < 640 ? 150 : 400); i++) {
                starList.push({
                    x: Math.random() * window.innerWidth,
                    y: Math.random() * window.innerHeight,
                    size: Math.random() * (window.innerWidth < 640 ? 1 : 1.5),
                    opacity: Math.random(),
                    speed: 0.005 + Math.random() * 0.02
                });
            }
        }

        function createShootingStar() {
            shootingStars.push({
                x: Math.random() * window.innerWidth,
                y: Math.random() * window.innerHeight * 0.5,
                len: Math.random() * 80 + 20,
                speed: Math.random() * 10 + 5,
                opacity: 1
            });
        }

        function animateStars() {
            requestAnimationFrame(animateStars);
            sCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
            starList.forEach(star => {
                star.opacity += star.speed;
                if (star.opacity > 1 || star.opacity < 0) star.speed *= -1;
                sCtx.globalAlpha = Math.max(0, star.opacity);
                sCtx.fillStyle = "#fff";
                sCtx.beginPath();
                sCtx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                sCtx.fill();
            });
            sCtx.globalAlpha = 1;
            for (let i = shootingStars.length - 1; i >= 0; i--) {
                let s = shootingStars[i];
                sCtx.strokeStyle = `rgba(94, 234, 212, ${s.opacity})`;
                sCtx.lineWidth = 2;
                sCtx.beginPath();
                sCtx.moveTo(s.x, s.y);
                sCtx.lineTo(s.x - s.len, s.y + s.len);
                sCtx.stroke();
                s.x += s.speed;
                s.y -= s.speed;
                s.opacity -= 0.02;
                if (s.opacity <= 0) shootingStars.splice(i, 1);
            }
            if (Math.random() < 0.005) createShootingStar();
        }

        // --- 2D FIREWORKS CANVAS ---
        const fwCanvas = document.getElementById('fireworks-canvas');
        const fwCtx = fwCanvas.getContext('2d');
        let particles = [];
        let isShowMode = false;

        function resizeFw() {
            const dpr = window.devicePixelRatio || 1;
            fwCanvas.width = window.innerWidth * dpr;
            fwCanvas.height = window.innerHeight * dpr;
            fwCanvas.style.width = window.innerWidth + 'px';
            fwCanvas.style.height = window.innerHeight + 'px';
            fwCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
        }

        class Particle {
            constructor(x, y, color, velocity) {
                this.x = x; this.y = y; this.color = color; this.velocity = velocity;
                this.alpha = 1; this.friction = 0.96; this.gravity = 0.05;
                this.size = Math.random() * 2 + 2;
            }
            draw() {
                fwCtx.globalAlpha = Math.max(0, this.alpha);
                fwCtx.fillStyle = this.color;
                fwCtx.fillRect(Math.floor(this.x), Math.floor(this.y), this.size, this.size);
            }
            update() {
                this.velocity.x *= this.friction;
                this.velocity.y *= this.friction;
                this.velocity.y += this.gravity;
                this.x += this.velocity.x;
                this.y += this.velocity.y;
                this.alpha *= 0.975; 
            }
        }

        function createFirework(x, y, isHeart = false) {
            const colors = ['#5eead4', '#22d3ee', '#ffffff', '#e2e8f0', '#94a3b8'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const count = isHeart ? 120 : 40;
            if (isHeart) {
                for (let i = 0; i < count; i++) {
                    const t = (i / count) * Math.PI * 2;
                    const hx = 16 * Math.pow(Math.sin(t), 3);
                    const hy = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
                    particles.push(new Particle(x, y, '#5eead4', { x: hx * 0.65, y: hy * 0.65 }));
                }
            } else {
                for (let i = 0; i < count; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 6 + 2;
                    particles.push(new Particle(x, y, color, { x: Math.cos(angle) * speed, y: Math.sin(angle) * speed }));
                }
            }
        }

        function startTheShow() {
            // Trigger CRT collapse effect (reverse of appear)
            document.getElementById('main-ui').classList.add('ui-fade-out');
            isShowMode = true;
            createFirework(window.innerWidth / 2, window.innerHeight / 2, true);
            for(let i=1; i<15; i++) {
                setTimeout(() => {
                    createFirework(Math.random() * window.innerWidth, Math.random() * window.innerHeight * 0.5 + 50);
                }, i * 500 + 400);
            }
        }

        function animateFw() {
            requestAnimationFrame(animateFw);
            fwCtx.globalAlpha = 1;
            fwCtx.globalCompositeOperation = 'destination-out';
            fwCtx.fillStyle = 'rgba(0, 0, 0, 0.25)'; 
            fwCtx.fillRect(0, 0, window.innerWidth, window.innerHeight);
            fwCtx.globalCompositeOperation = 'source-over';
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.update(); p.draw();
                if (p.alpha < 0.01) particles.splice(i, 1);
            }
            if (isShowMode && Math.random() < 0.08) {
                createFirework(Math.random() * window.innerWidth, Math.random() * window.innerHeight * 0.7);
            }
        }

        window.onload = () => {
            renderLetter();
            initStars();
            animateStars();
            resizeFw();
            animateFw();
            window.addEventListener('resize', () => { 
                initStars();
                resizeFw(); 
            });
        };
    </script>
</body>
</html>